<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Color Palettes from Images • imgpalr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Create Color Palettes from Images">
<meta property="og:description" content="Provides ability to create color palettes from image files. 
    It offers control over the type of color palette to derive from an image (qualitative, sequential or divergent) and other palette properties.
    Quantiles of an image color distribution can be trimmed. 
    Near-black or near-white colors can be trimmed in RGB color space independent of trimming brightness or saturation distributions in HSV color space.
    Creating sequential palettes also offers control over the order of HSV color dimensions to sort by.
    This package differs from other related packages like 'RImagePalette' in approaches to quantizing and extracting colors in images to assemble color palettes 
    and the level of user control over palettes construction.">
<meta property="og:image" content="http://leonawicz.github.io/imgpalr/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">imgpalr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/leonawicz/imgpalr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="imgpalr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#imgpalr" class="anchor"></a>imgpalr <img src="reference/figures/logo.png" style="margin-left:10px;margin-bottom:5px;" width="120" align="right">
</h1></div>
<p><strong>Author:</strong> <a href="https://leonawicz.github.io/blog/">Matthew Leonawicz</a> <a href="https://orcid.org/0000-0001-9452-2771" target="orcid.widget"> <image class="orcid" src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" height="16"></image></a> <br><strong>License:</strong> <a href="https://opensource.org/licenses/MIT">MIT</a><br></p>
<p><a href="https://cran.r-project.org/package=imgpalr"><img src="http://www.r-pkg.org/badges/version/imgpalr" alt="CRAN status"></a> <a href="https://cran.r-project.org/package=imgpalr"><img src="http://cranlogs.r-pkg.org/badges/grand-total/imgpalr" alt="CRAN downloads"></a> <a href="http://www.rdocumentation.org/packages/imgpalr"><img src="http://www.rdocumentation.org/badges/version/imgpalr" alt="Rdoc"></a> <a href="https://travis-ci.org/leonawicz/imgpalr"><img src="https://travis-ci.org/leonawicz/imgpalr.svg?branch=master" alt="Travis build status"></a> <a href="https://ci.appveyor.com/project/leonawicz/imgpalr"><img src="https://ci.appveyor.com/api/projects/status/github/leonawicz/imgpalr?branch=master&amp;svg=true" alt="AppVeyor build status"></a> <a href="https://codecov.io/gh/leonawicz/imgpalr?branch=master"><img src="https://codecov.io/gh/leonawicz/imgpalr/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></p>
<p>The <code>imgpalr</code> package makes it easy to create color palettes from image files.</p>
<ul>
<li>Choose the type of color palette to derive from an image: qualitative, sequential or divergent.</li>
<li>Quantiles of an image color distribution can be trimmed.</li>
<li>Near-black or near-white colors can be trimmed in RGB space independent of trimming brightness or saturation distributions in HSV space.</li>
<li>Creating sequential palettes also offers control over the order of HSV color dimensions to sort by.</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version of <code>imgpalr</code> from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("remotes")</span></a>
<a class="sourceLine" id="cb1-2" title="2">remotes<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/remotes/topics/install_github">install_github</a></span>(<span class="st">"leonawicz/imgpalr"</span>)</a></code></pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>The main function is <code>image_pal</code>. It accepts PNG, JPG, BMP or GIF (first frame) images either from disk or URL. It returns a vector of colors defining a palette based on the image and your other function arguments. You can also set <code>plot = TRUE</code> to plot a preview of the palette, which includes the source image thumbnail for visual reference.</p>
<p>The examples below offer some typical considerations to make when deriving a color palette from an arbitrary image.</p>
<div id="three-palette-types" class="section level3">
<h3 class="hasAnchor">
<a href="#three-palette-types" class="anchor"></a>Three palette types</h3>
<p>In this first set of examples, divergent, qualitative and sequential palettes are generated from the same image and while varying some additional settings.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(imgpalr)</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="dt">package =</span> <span class="st">"imgpalr"</span>), <span class="st">"/"</span>,</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"blue-yellow"</span>, <span class="st">"purples"</span>, <span class="st">"colors"</span>), <span class="st">".jpg"</span>)</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># Three palette types, one image</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co"># Focus on bright, saturated colors for divergent palette:</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">1</span>], <span class="dt">type =</span> <span class="st">"div"</span>,</a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="dt">saturation =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.75</span>, <span class="dv">1</span>), <span class="dt">brightness =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.75</span>, <span class="dv">1</span>), <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example-1.png" width="100%"></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># Remove colors too close to black and white for qualitative palette:</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">1</span>], <span class="dt">type =</span> <span class="st">"qual"</span>, <span class="dt">bw =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.25</span>, <span class="fl">0.9</span>), <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example-2.png" width="100%"></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"></a>
<a class="sourceLine" id="cb4-2" title="2"> <span class="co"># A challenging sequential mapping</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">1</span>], <span class="dt">type =</span> <span class="st">"seq"</span>, <span class="dt">saturation =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.2</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="dt">brightness =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="dv">1</span>), <span class="dt">seq_by =</span> <span class="st">"hsv"</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example-3.png" width="100%"></p>
</div>
<div id="a-dominant-hue" class="section level3">
<h3 class="hasAnchor">
<a href="#a-dominant-hue" class="anchor"></a>A dominant hue</h3>
<p>In this test image, hue varies over a narrow range. A sequential palette is sensible here, but not necessarily best sorted by hue. Doing so does still show a perceivable order to the colors, but it is much more difficult to discern. Sorting the palette first by saturation or brightness makes a much better sequential palette in this case.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">2</span>], <span class="dt">type =</span> <span class="st">"seq"</span>, <span class="dt">seq_by =</span> <span class="st">"hsv"</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example2-1.png" width="100%"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">2</span>], <span class="dt">type =</span> <span class="st">"seq"</span>, <span class="dt">seq_by =</span> <span class="st">"svh"</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example2-2.png" width="100%"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">2</span>], <span class="dt">type =</span> <span class="st">"seq"</span>, <span class="dt">seq_by =</span> <span class="st">"vsh"</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example2-3.png" width="100%"></p>
</div>
<div id="several-hues" class="section level3">
<h3 class="hasAnchor">
<a href="#several-hues" class="anchor"></a>Several hues</h3>
<p>Using an image with several prominent hues, a divergent palette is not sensible here. A sequential is likely best sorted by hue.</p>
<p>Note in the second image below, you can also set <code>quantize = TRUE</code> to show a color-quantized reference thumbnail image based on the derived palette. This makes use of the <code>image_quantmap</code> function. Rather than only quantizing the image, it does so while also mapping the colors of any image to an arbitrary color palette based on nearest distances in RGB space.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">3</span>], <span class="dt">type =</span> <span class="st">"qual"</span>, <span class="dt">brightness =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.4</span>, <span class="dv">1</span>), <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example3-1.png" width="100%"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="reference/image_pal.html">image_pal</a></span>(x[<span class="dv">3</span>], <span class="dt">type =</span> <span class="st">"seq"</span>, <span class="dt">bw =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.2</span>, <span class="dv">1</span>), <span class="dt">saturation =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.2</span>, <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb9-2" title="2">          <span class="dt">plot =</span> <span class="ot">TRUE</span>, <span class="dt">quantize =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="reference/figures/README-example3-2.png" width="100%"></p>
<p>Palette generation uses k-means clustering; results are different each time you call <code>image_pal</code>. If the palette you obtain does not feel right, even with fixed arguments you can run it again to obtain a different palette. Depending on the settings and the nature of the source image, it may change quite a bit. If you need a reproducible palette, set the <code>seed</code> argument. In the example above, the seed was set globally to avoid having to set it in each call to <code>image_pal</code>.</p>
</div>
</div>
<div id="related-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#related-resources" class="anchor"></a>Related resources</h2>
<p>There is also the <a href="https://CRAN.R-project.org/package=RImagePalette">RImagePalette</a> package on CRAN, which uses the median cut algorithm for finding they dominant colors in an image.</p>
<p><code>imgpalr</code> was originally inspired by the <a href="https://github.com/AndreaCirilloAC/paletter">paletter</a> package on GitHub. Both packages use k-means clustering to find key image colors, but take some different approaches in methods for assembling color palettes.</p>
<p>The palette preview (without the thumbnail addition) is based off of <code><a href="https://www.rdocumentation.org/packages/scales/topics/show_col">scales::show_col</a></code>, which is a convenient function for plotting palettes. You can also use <code><a href="https://www.rdocumentation.org/packages/pals/topics/pal.bands">pals::pal.bands</a></code> to do the same using a different visual layout.</p>
<p>If you want to directly manipulate the color properties of an image for its own sake rather than derive color palettes for other purposes, you can do so using the <a href="https://CRAN.R-project.org/package=magick">magick</a> package, which provides bindings to the ImageMagick library.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/leonawicz/imgpalr">https://​github.com/​leonawicz/​imgpalr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/leonawicz/imgpalr/issues">https://​github.com/​leonawicz/​imgpalr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://leonawicz.github.io/">Matthew Leonawicz</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-9452-2771" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://leonawicz.github.io/">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
