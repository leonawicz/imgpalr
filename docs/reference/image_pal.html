<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a color palette from an image — image_pal • imgpalr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Create a color palette from an image — image_pal" />

<meta property="og:description" content="Derive qualitative, sequential and divergent color palettes from an image on disk or at a URL." />

<meta property="og:image" content="http://leonawicz.github.io/imgpalr/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">imgpalr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/leonawicz/imgpalr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a color palette from an image</h1>
    <small class="dont-index">Source: <a href='https://github.com/leonawicz/imgpalr/blob/master/R/imgpalr.R'><code>R/imgpalr.R</code></a></small>
    <div class="hidden name"><code>image_pal.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Derive qualitative, sequential and divergent color palettes from an image on disk or at a URL.</p>
    
    </div>

    <pre class="usage"><span class='fu'>image_pal</span>(<span class='no'>file</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>9</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"qual"</span>, <span class='st'>"seq"</span>, <span class='st'>"div"</span>), <span class='kw'>bw</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>brightness</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>), <span class='kw'>saturation</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>), <span class='kw'>seq_by</span> <span class='kw'>=</span> <span class='st'>"hsv"</span>,
  <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>labels</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>label_size</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>keep_asp</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file</th>
      <td><p>character, file path or URL to an image.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>integer, number of colors.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>character, type of palette: qualitative, sequential or divergent (<code>"qual"</code>, <code>"seq"</code>, or <code>"div"</code>).</p></td>
    </tr>
    <tr>
      <th>bw</th>
      <td><p>a numeric vector of length two giving the lower and upper quantiles to trim trim near-black and near-white colors in RGB space.</p></td>
    </tr>
    <tr>
      <th>brightness</th>
      <td><p>as above, trim possible colors based on brightness in HSV space.</p></td>
    </tr>
    <tr>
      <th>saturation</th>
      <td><p>as above, trim possible colors based on saturation in HSV space.</p></td>
    </tr>
    <tr>
      <th>seq_by</th>
      <td><p>character, sort sequential palette by HSV dimensions in a specific order, e.g., <code>"hsv"</code>, <code>"svh"</code>. See details.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>numeric, set the seed for reproducible results.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>logical, plot the palette.</p></td>
    </tr>
    <tr>
      <th>labels</th>
      <td><p>logical, show hex color values in plot.</p></td>
    </tr>
    <tr>
      <th>label_size</th>
      <td><p>numeric, label size in plot.</p></td>
    </tr>
    <tr>
      <th>keep_asp</th>
      <td><p>logical, adjust rectangles in plot to use the image aspect ratio.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>character vector of hex colors, optionally draws a plot</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Ordering colors is a challenging problem. There are many ways to do it; none are perfect.
Color is a multi-dimensional property; any reduction to a a one dimensional color spectrum necessarily removes information.</p>
<p>Creating a sequential palette from an arbitrary image that contains several hues, at different saturation and brightness levels, and making a palette that looks sequential is particularly problematic.
This function does a decent job of creating qualitative, sequential and divergent palettes from images, but additional tweaking of function arguments is needed on a case by case basis.
This can include trimming the extreme values of the color distribution in terms of brightness, saturation and presence of near-black/white colors as pre-processing steps.
There is also variation in possible palettes from a given image, depending on the image complexity and other properties, though you can set the random seed for reproducibility.</p>
    
    <h2 class="hasAnchor" id="trimming-color-distribution"><a class="anchor" href="#trimming-color-distribution"></a>Trimming color distribution</h2>

    
    <p>Some pre-processing can be done to limit undesirable colors from ending up in a palette.
<code>bw</code> specifically drops near-black and near-white colors as soon as the image is loaded by looking at the average values in RGB space.
<code>brightness</code> and <code>saturation</code> trimming are applied subsequently to trim lower and upper quantiles of the HSV value and saturation, respectively.
If you have already trimmed black and white, keep in mind these two arguments will trim further from what remains of the color distribution.</p>
    
    <h2 class="hasAnchor" id="choosing-appropriate-palette-type"><a class="anchor" href="#choosing-appropriate-palette-type"></a>Choosing appropriate palette type</h2>

    
    <p>Keep in mind that many images simple do not make sense to try to derive sensible color palettes from.
For images that do lend themselves to a useful color palette derivation, some may only make sense to consider for a divergent palette, or an increasing/decreasing sequential palette,
or only a qualitative palette if there are too many colors that are difficult to order.
For divergent palettes in particular, it is recommended to trim white, e.g. <code>bw = c(0, 0.9)</code>, depending on the white space of a given image, since the divergent palettes are centered on white.</p>
    
    <h2 class="hasAnchor" id="sorting-sequential-palettes"><a class="anchor" href="#sorting-sequential-palettes"></a>Sorting sequential palettes</h2>

    
    <p><code>seq_by = "hsv"</code> orders the final palette by hue, then saturation, then value (brightness). This default is not meant to be ideal for all images.
It work better in cases where sequential palettes may contain several distinct hues, but not much variation in saturation or brightness.
However, for example, palettes derived from an image with relatively little variation in hue may appear more sorted to the human eye if ordered by hue last using <code>"svh"</code> or <code>"vsh"</code>,
depending on whether you want the palette to appear to transition more from lower saturation or lower brightness to the predominant hue.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Only run in interactive R session</span>
<span class='kw'>if</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/interactive'>interactive</a></span>()){
  <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>1</span>)
  <span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/paste'>paste0</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"imgpalr"</span>), <span class='st'>"/"</span>,
    <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"blue-yellow"</span>, <span class='st'>"purples"</span>, <span class='st'>"colors"</span>), <span class='st'>".jpg"</span>)

  <span class='co'># Three palette types, one image</span>
  <span class='co'># Focus on bright, saturated colors for divergent palette:</span>
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>1</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"div"</span>,
    <span class='kw'>saturation</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.75</span>, <span class='fl'>1</span>), <span class='kw'>brightness</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.75</span>, <span class='fl'>1</span>), <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

  <span class='co'># Remove colors too close to black and white for qualitative palette:</span>
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>1</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"qual"</span>, <span class='kw'>bw</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.25</span>, <span class='fl'>0.9</span>), <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

   <span class='co'># A challenging sequential mapping</span>
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>1</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"seq"</span>, <span class='kw'>saturation</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.2</span>, <span class='fl'>1</span>),
    <span class='kw'>brightness</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.5</span>, <span class='fl'>1</span>), <span class='kw'>seq_by</span> <span class='kw'>=</span> <span class='st'>"hsv"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

  <span class='co'># An image with one main hue;</span>
  <span class='co'># sequential is most sensible, but not necessarily best sorted by hue</span>
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>2</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"seq"</span>, <span class='kw'>seq_by</span> <span class='kw'>=</span> <span class='st'>"hsv"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>2</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"seq"</span>, <span class='kw'>seq_by</span> <span class='kw'>=</span> <span class='st'>"svh"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>2</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"seq"</span>, <span class='kw'>seq_by</span> <span class='kw'>=</span> <span class='st'>"vsh"</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

  <span class='co'># An image with one several hues;</span>
  <span class='co'># divergent is not sensible here, sequential should be by hue</span>
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>3</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"qual"</span>, <span class='kw'>brightness</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.4</span>, <span class='fl'>1</span>), <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
  <span class='fu'>image_pal</span>(<span class='no'>x</span>[<span class='fl'>3</span>], <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"seq"</span>, <span class='kw'>bw</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.2</span>, <span class='fl'>1</span>), <span class='kw'>saturation</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.2</span>, <span class='fl'>1</span>), <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#trimming-color-distribution">Trimming color distribution</a></li>

      <li><a href="#choosing-appropriate-palette-type">Choosing appropriate palette type</a></li>

      <li><a href="#sorting-sequential-palettes">Sorting sequential palettes</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://leonawicz.github.io/'>Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

